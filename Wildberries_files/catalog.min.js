(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){asyncGeneratorStep(o,n,a,i,s,"next",e)}function s(e){asyncGeneratorStep(o,n,a,i,s,"throw",e)}i(void 0)})}}!function(){var e=!1,t=require("./catalog/mainCatalog"),r=require("./catalog/goodsCatalog"),n=require("./catalog/brandsCatalog"),a=require("./catalog/brandConstructor"),o=require("./catalog/searchCatalog"),i=require("./catalog/brandConstructorCatalog"),s=require("./catalog/sellerCatalog"),u=Object.freeze({main:1,goods:2,search:3,brand:4,brandConstructor:5,brandConstructorCatalog:6,seller:7}),l=function(){function l(e,t){var r;"SpaSearchEntrypoint"==t?(this.data=null,this.model=null,this.catalogType=u.search,this.mainVersion=0):(this.data=null!==(r=null==e?void 0:e.data)&&void 0!==r?r:e,this.model=this.data.model,this.catalogType=this.data.type,this.mainVersion=this.data.mainVersion,this.$setGoogleTagsModel(this.data.model.googleTagParams),this.$setActionPayRetargetingModel(this.data.model.actionPayRetargetingData));this.routeName=t,this.model=this._getModel(),this.getTemplate.depends=["model","mainVersion","catalogType"]}var c=l.prototype;return c.onAfterRender=function(){var t,r,n=this;(this.$router.clientRenderInited&&this.$seoHelper.render(this.model.metaTags),e)||(this.$router.getAppliedEntries().forEach(function(e){return $.templates[e]=$.templates[n.$router.currentRoute.name]}),e=!0);null===(t=(r=this.model).onAfterRender)||void 0===t||t.call(r)},c.onBeforeRender=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._loadRequiredResourses(),null===(t=(r=this.model).onBeforeRender)||void 0===t?void 0:t.call(r)]);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),c.onHistoryChange=function(e,t){var r,n,a;(null===(r=this.model.advGoodsHelper)||void 0===r||r.reset(),t||null==e.catalogState||e.catalogState.catalogType==u.main||e.catalogState.catalogType==u.brandConstructor||e.catalogState.sessionId!=this.model.sessionId)?this._updateModel(t):null===(n=(a=this.model).onHistoryChange)||void 0===n||n.call(a,e,t)},c.onBeforeUnrender=function(){var e,t,r;null===(e=this.model.advGoodsHelper)||void 0===e||e.reset(),null===(t=(r=this.model).onBeforeUnrender)||void 0===t||t.call(r)},c._updateModel=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.$router.currentRoute.requiredData){e.next=2;break}return e.abrupt("return",this.model.updateFullModel());case 2:return e.prev=2,e.next=5,this.$router.loadRouteDataAsync(this.$router.currentRoute.requiredData,0,!1,t);case 5:r=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),!e.t0.isNotFound){e.next=12;break}return e.abrupt("return",this.$router.moveTo404Async());case 12:if(e.t0.isCancelled||e.t0.isUnauthorize||null==e.t0.message||""==e.t0.message){e.next=15;break}return console.log(e.t0.message),e.abrupt("return",this.$router.moveTo500Async(e.t0,{method:"catalog._updateModel",current:window.location.toString(),requiredData:this.$router.currentRoute.requiredData}));case 15:if(e.prev=15,o=(a=r).viewData,i=a.counterEventsModel,s=null!==(n=null==o?void 0:o.data)&&void 0!==n?n:o,this.data=s,this.$seoHelper.render(s.model.metaTags),this.$router.updateCriterio(i),this.$setGoogleTagsModel(s.model.googleTagParams),this.$setActionPayRetargetingModel(s.model.actionPayRetargetingData),s.type!=u.main||this.catalogType!=u.main){e.next=28;break}return e.next=26,this._betweenMainsTransitionAsync(s);case 26:e.next=34;break;case 28:if(s.type!=u.brandConstructor||this.catalogType!=u.brandConstructor){e.next=33;break}return e.next=31,this._betweenConstructorsTransitionAsync(s);case 31:e.next=34;break;case 33:s.type==this.catalogType?this.model.updateFullModel(s.model):this._betweenMainAndGoodsTransitionAsync(s);case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(15),console.error(e.t1),wb.popup.renderModalError(this.$localziation.serverError);case 40:case"end":return e.stop()}},e,this,[[2,8],[15,36]])}));return function(t){return e.apply(this,arguments)}}(),c.getTemplate=function(){switch(this.catalogType){case u.brandConstructor:case u.brandConstructorCatalog:return"brandConstructor";case u.goods:case u.seller:return"goodsCatalog";case u.brand:return"brandsCatalog";case u.search:return"searchCatalog";case u.main:if(3==this.mainVersion)return"mainCatalogV3";if($.templates["mainCatalog-menuId-".concat(this.model.menuId)])return"mainCatalog-menuId-".concat(this.model.menuId);default:return"mainCatalog"}},c._getModel=function(e,l,c){var d=null!=e?e:this.catalogType,h=null!=l?l:this.model;switch(d){case u.main:return new t(_objectSpread(_objectSpread({},h),{},{version:null!=c?c:this.mainVersion}),d);case u.goods:return new r(h,d,this.routeName,this.data);case u.search:return new o(d,this.routeName);case u.brand:return new n(h,d,this.routeName,this.data);case u.brandConstructor:return new a(h,d);case u.brandConstructorCatalog:return new i(h,d,this.routeName,this.data);case u.seller:return new s(h,d,this.routeName,this.data)}},c._loadRequiredResourses=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.model;return Promise.all([].concat(_toConsumableArray((null!==(e=r.reqiredCss)&&void 0!==e?e:[]).map(this.$helper.loadCssAsync)),_toConsumableArray((null!==(t=r.requiredJs)&&void 0!==t?t:[]).map(this.$helper.loadJsAsync))))},c._betweenMainsTransitionAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r){var n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(3!=this.mainVersion||3!=r.mainVersion){e.next=4;break}this.model.updateFullModel(r.model),e.next=17;break;case 4:return e.next=6,this._loadRequiredResourses(r.model);case 6:if(this.$router.clientRenderInited){e.next=11;break}this.$router.initCSR(),this.$router.updateRouteDataExternal(r),e.next=17;break;case 11:return null===(n=(a=this.model).onBeforeUnrender)||void 0===n||n.call(a),o=new t(r.model),$.observable(this).setProperty({model:o,mainVersion:r.mainVersion}),e.next=16,this.$helper.nextTick();case 16:o.onAfterRender();case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c._betweenConstructorsTransitionAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$router.clientRenderInited?this.model.updateFullModel(t.model):(this.$router.initCSR(),this.$router.updateRouteDataExternal(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c._betweenMainAndGoodsTransitionAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$router.clientRenderInited){e.next=5;break}this.$router.initCSR(),this.$router.updateRouteDataExternal(t),e.next=14;break;case 5:return null===(r=(n=this.model).onBeforeUnrender)||void 0===r||r.call(n),o=this._getModel(t.type,t.model,t.mainVersion),e.next=9,this._loadRequiredResourses(o);case 9:return null===(a=o.onBeforeRender)||void 0===a||a.call(o),$.observable(this).setProperty({model:o,catalogType:t.type,mainVersion:t.mainVersion}),e.next=13,this.$helper.nextTick();case 13:o.onAfterRender();case 14:case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l}();wb.spa.registerViewModel(l)}();

},{"./catalog/brandConstructor":3,"./catalog/brandConstructorCatalog":4,"./catalog/brandsCatalog":5,"./catalog/goodsCatalog":6,"./catalog/mainCatalog":7,"./catalog/searchCatalog":8,"./catalog/sellerCatalog":9}],2:[function(require,module,exports){
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,"throw",e)}o(void 0)})}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XGoodsLoader=require("../../modules/catalog/xCatalogGoodsLoader"),XLegacyGoodsLoader=require("../../modules/catalog/xLegacyCatalogGoodsLoader"),COOKIE_VALIDITY=86400,CATALOG_COOKIE_NAME="__catalogOptions",BaseGoodsCatalogViewModel=function(e){function t(){var t;return(t=e.call(this)||this).catalogProductCardManager=null,t.sessionId=t._generateId(),t.yourChoice=[],t.originalUrl=window.location.pathname,t.mobileSorterShown=!1,t._onFilterInited=t._onFilterInited.bind(_assertThisInitialized(t)),t._onFiltersUpdating=t._onFiltersUpdating.bind(_assertThisInitialized(t)),t._updateGoodsCountFromFilter=t._updateGoodsCountFromFilter.bind(_assertThisInitialized(t)),t.isDenyLink=t.isDenyLink.bind(_assertThisInitialized(t)),t}_inheritsLoose(t,e);var r=t.prototype;return r.onHistoryChange=function(e){var t=this,r=this.queryHelper.checkChanges(e.catalogState);if(r.needChangeCardSize){var n,a=null!==(n=this.sizerModel.cardSizeEntries.find(function(t){return t.value==e.catalogState.cardSize}))&&void 0!==n?n:this.sizerModel.cardSizeEntries.find(function(e){return e.originalValue==t.sizerModel.defaultCardSize});this._updateCardSizeInternal(a)}if(r.needUpdateSort){var i,o=null!==(i=this.sorterModel.sortingEntries[e.catalogState.sort])&&void 0!==i?i:this.sorterModel.sortingEntries.popular;this._updateSortInternal(o)}if(r.needUpdatePage&&this.pagerHelper.updatePage(e.catalogState.page||1),r.needUpdateFilters){this.filterHelper.setFilters(e.catalogState.filters);var s={filterQuery:this.filterHelper.currentFilterModel,updateGoodsImmediately:!1};this.$eventBus.dispatchEvent(new CustomEvent("needFilterUpdate",{detail:s})),this._updateChoice()}if(!r.needCatalogUpdate&&r.needChangeCardSize)this._rerenderCatalog();else{var u={filterQuery:this.filterHelper.currentFilterModel,updateGoodsImmediately:!0};this.$eventBus.dispatchEvent(new CustomEvent("needFilterUpdate",{detail:u}))}},r.onAfterRender=function(){this._subscribeToFiltres()},r.onBeforeUnrender=function(){var e;null===(e=this.filterHelper)||void 0===e||e.destroy(),this._unSubscribeFromFiltres()},r.isDenyLink=function(e){var t;return(null===(t=this.menuDenyLinks)||void 0===t?void 0:t.indexOf(e))>-1},r.updateSort=function(e,t){t.preventDefault(),this.sorterModel.currentSortingOrder!=e.originalValue&&(this.queryHelper.setKeys([{key:"sort",value:e.value},{key:"page",value:1}]),this.pagerHelper.updatePage(1),this._updateSortInternal(e),this._updateCatalogGoodsAsync())},r.updateCardSizes=function(e,t){t.preventDefault(),e.originalValue!=this.sizerModel.currentCardSize&&(this.queryHelper.setKey("cardsize",e.value),this._updateCardSizeInternal(e),this._rerenderCatalog())},r.applyNextSize=function(e){var t=this,r=this.sizerModel.cardSizeEntries.findIndex(function(e){return e.originalValue==t.sizerModel.currentCardSize}),n=this.sizerModel.cardSizeEntries[++r%this.sizerModel.cardSizeEntries.length];this.updateCardSizes(n,e)},r.updatePage=function(e,t){t.preventDefault(),this.queryHelper.setKey("page",e),this.pagerHelper.updatePage(e),this.$moveToAnchor("catalog"),this._updateCatalogGoodsAsync()},r.removeChoice=function(e,t){this.filterHelper.filtersDictionary.get(e.model).removeSelected(e.value);var r=this.filterHelper.currentFilterModel;this.pagerHelper.updatePage(1),t.currentTarget.closest("li").classList.add("hide");var n={filterQuery:r,updateGoodsImmediately:!0};this.$eventBus.dispatchEvent(new CustomEvent("needFilterUpdate",{detail:n}))},r.showMobileFilters=function(){this.filterHelper.showMobileFilters()},r.showMobileSorter=function(e){var t=this;if(!this.mobileSorterShown){e.preventDefault(),e.stopPropagation(),$.observable(this).setProperty({mobileSorterShown:!0});window.addEventListener("click",function e(r){r.target.closest(".j-mobile-sorter-list")||($.observable(t).setProperty({mobileSorterShown:!1}),window.removeEventListener("click",e))})}},r.hasUnselectedMenuItems=function(e){var t,r=this;return null===(t=null==e?void 0:e.every(function(e){return e.node.isOpen&&r.hasUnselectedMenuItems(e.children)}))||void 0===t||t},r._getXPath=function(){return("ru"===wb.settings.currentLocale?"https://wbxcatalog-ru.wildberries.ru/":"https://wbxcatalog-sng.wildberries.ru/")+this.xData.xcatalogShard+"/catalog"},r._updateCatalogGoodsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadCatalogGoodsAsync();case 2:return r=e.sent,n=r.products,a=r.advGoodsAdded,i=r.total,this.products=n,e.next=9,this._rerenderCatalog(this.products,t);case 9:return a&&this.advGoodsHelper.setAdvInfoOnCards(),null!==i&&this.pagerHelper.updateTotalItems(i),this.filterFallback&&n.length<100&&this.pagerHelper.updateTotalItems(100*(this.pagerHelper.pagerModel.pagingInfo.currentPage-1)+n.length),e.abrupt("return",i);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._loadCatalogGoodsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadXgoodsAsync();case 2:if(t=e.sent,r=t.productsAdapted,n=t.total,a=t.injection,i=!1,null==this.advGoodsHelper||!this._canUpdateAdvGoods()){e.next=18;break}return e.prev=8,e.next=11,this.advGoodsHelper.getAdvGoodsAsync(this.xData);case 11:null!=(o=e.sent)&&(s=o.products,u=o.advertCardsInfo,r=this._getExtendedCatalogWithAdvGoods(r,s,u),i=!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error(e.t0.message);case 18:return e.abrupt("return",{products:r,advGoodsAdded:i,total:n,injection:a});case 19:case"end":return e.stop()}},e,this,[[8,15]])}));return function(){return e.apply(this,arguments)}}(),r._loadXgoodsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$getCurrentXInfoAsync();case 2:if(t=e.sent,r=this.queryHelper.getQueryStringForCatalog(),this.xData.legacyMode){e.next=10;break}return e.next=7,XGoodsLoader.loadGoodsAsync(t,this.xData,r);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,XLegacyGoodsLoader.loadGoodsAsync(t,this.xData,r);case 12:e.t0=e.sent;case 13:return n=e.t0,e.abrupt("return",{productsAdapted:n.data.products.map(function(e){return wb.xnm.convertXProductToSpaCatalogProduct(e)}),total:n.data.total||null});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._updateLazyLoader=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$helper.nextTick();case 2:this.imageLoader.update(this.topContentConatainer.querySelectorAll("[data-original]").toArray());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._sortSizes=function(e){return e.sort(function(e,t){return e.rank-t.rank}),e.map(function(e){return{ch:e.optionId,s:1,nm:e.name}})},r._updateCatalogCookie=function(e,t){var r=this,n=wb.cookieHelper.getCookie(CATALOG_COOKIE_NAME);if(null!=n){var a=n.split("&").map(function(r){return r.indexOf(e)>-1?"".concat(e,":").concat(t[0].toUpperCase()).concat(t.slice(1)):r}).join("&");wb.cookieHelper.setCookie(CATALOG_COOKIE_NAME,a,{domain:"."+wb.settings.domainName,"max-age":COOKIE_VALIDITY})}else{var i=this.sizerModel.cardSizeEntries.find(function(e){return e.originalValue==r.sizerModel.defaultCardSize}).value,o=this.sorterModel.value,s="CardSize:".concat(i[0].toUpperCase()).concat(i.slice(1),"&Sort:").concat(o[0].toUpperCase()).concat(o.slice(1));wb.cookieHelper.setCookie(CATALOG_COOKIE_NAME,s,{domain:"."+wb.settings.domainName,"max-age":COOKIE_VALIDITY})}},r._rerenderCatalog=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.products,r=n.length>1&&void 0!==n[1]?n[1]:Promise.resolve(),this.catalogProductCardManager.updateCards(t),this._sendStatistic(),this._updateLazyLoader(),e.next=7,r;case 7:this.$catalogCache.saveCatalogCache(this.routeName,this.cacheKey,this.cacheModel);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._updateCardSizeInternal=function(e){$.observable(this.sizerModel).setProperty({currentCardSize:e.originalValue,value:e.value}),this._updateCatalogCookie("CardSize",e.value)},r._updateSortInternal=function(e){$.observable(this).setProperty({"sorterModel.currentSortingOrder":e.originalValue,"sorterModel.value":e.value,"sorterModel.textValue":e.textValue,mobileSorterShown:!1}),this._updateCatalogCookie("Sort",e.value)},r._initFilters=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("filters"),e.next=3,this.$moduleLoader.loadModuleAsync("filtersHelper");case 3:if(n=e.sent,this.filterHelper=new n(r,this.xData,this.initialFilters,this.selectedHasChild),a=0,!this.catalogEmpty){e.next=8;break}return e.abrupt("return",a);case 8:if(null==t){e.next=12;break}a=this.filterHelper.initFromCache(t),e.next=15;break;case 12:return e.next=14,this.filterHelper.initFiltersAsync();case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._getInitialParams=function(){var e={};return this.$router.queryParams.forEach(function(t,r){e[r.toLowerCase()]=t}),e},r._generateId=function(){return Math.pow(Date.now(),Math.random()).toString(36).slice(0,9)},r._updateChoice=function(e){var t,r=this;try{var n;e=null!==(n=e)&&void 0!==n?n:this.filterHelper.currentFilterModel}catch(t){e={}}var a=null!==(t=Object.keys(e).reduce(function(e,t){var n,a=r.filterHelper.filtersDictionary.get(t);return null===(n=a.allItems)||void 0===n||n.forEach(function(r){a.selectedValues.some(function(e){return e==r.value})&&e.push({name:r.name,model:t,value:r.value})}),e},[]))&&void 0!==t?t:[];$.observable(this.yourChoice).refresh(a)},r._canUpdateAdvGoods=function(){return 1==this.pagerHelper.pagerModel.pagingInfo.currentPage&&"popular"==this.sorterModel.value},r._getExtendedCatalogWithAdvGoods=function(e,t,r){var n=e,a=e.map(function(e){return e.nmId}),i=t.map(function(e){return e.nmId}),o=a.getIntesection(i);return o.length>0&&(n=e.filter(function(e){return!o.includes(e.nmId)})),t.forEach(function(t){var a,i=null===(a=r.find(function(e){return t.nmId===e.nmId}))||void 0===a?void 0:a.position;0===i||(i-1<e.length?n.splice(i-1,0,t):i>=e.length&&n.push(t))}),n},r._subscribeToFiltres=function(){this.$eventBus.addEventListener("filterInited",this._onFilterInited),this.$eventBus.addEventListener("filterWillUpdate",this._onFiltersUpdating),this.$eventBus.addEventListener("GoodsCountChanged",this._updateGoodsCountFromFilter)},r._unSubscribeFromFiltres=function(){this.$eventBus.removeEventListener("filterInited",this._onFilterInited),this.$eventBus.removeEventListener("filterWillUpdate",this._onFiltersUpdating),this.$eventBus.removeEventListener("GoodsCountChanged",this._updateGoodsCountFromFilter)},r._onFilterInited=function(){this._updateChoice()},r._onFiltersUpdating=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null!==(r=t.detail)&&void 0!==r?r:{},a=n.filterQuery,i=void 0===a?this.filterHelper.currentFilterModel:a,o=n.filterTask,this.queryHelper.setKeys([{key:"filters",value:i},{key:"page",value:1}]),this._updateCatalogGoodsAsync(o),this._updateChoice(i);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r._updateGoodsCountFromFilter=function(e){var t=e.detail.goodsCount;null==t||this.xData.legacyMode||(this.pagerHelper.updateTotalItems(t),t<=0&&wb.popup.renderModalError(this.$localziation.noGoodsFound))},r._sendStatistic=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,i,o,s,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.$geo.getLocation(),this.$user.getUserInfo()]);case 2:t=e.sent,r=_slicedToArray(t,2),n=r[0],a=r[1],i=this.pagerHelper.pagerModel.pagingInfo.currentPage,o=this.sorterModel.value,s=this.sizerModel.value,u=1!=i?[]:this.products.map(function(e){return e.nmId}),(l=[]).push(this.$stat.wrapParam("LCTN",n.cityId)),l.push(this.$stat.wrapParam("LONG",n.longitude)),l.push(this.$stat.wrapParam("LAT",n.latitude)),l.push(this.$stat.wrapParam("WUId",a.uid)),l.push(this.$stat.wrapParam("MId",this.menuId)),l.push(this.$stat.wrapParam("SORT",o)),l.push(this.$stat.wrapParam("Page",i)),l.push(this.$stat.wrapParam("PS",100)),l.push(this.$stat.wrapParam("CS",s)),l.push(this.$stat.wrapParam("TURL",this.originalUrl)),l.push(this.$stat.wrapParam("NMS",JSON.stringify(u))),this.$stat.sendEvent("CTO",l);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(WbSpaModel);module.exports=BaseGoodsCatalogViewModel;

},{"../../modules/catalog/xCatalogGoodsLoader":17,"../../modules/catalog/xLegacyCatalogGoodsLoader":18}],3:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,r,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,r,o,i,s,"throw",e)}i(void 0)})}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BrandLikeHelper=require("../../modules/catalog/brandLikeHelper"),BrandDirectionsHelper=require("../../modules/catalog/brandDirectionHelper"),CONTAINER_SPECIAL_CLASS="main__container--constructor",BrandConstructorViewModel=function(e){function t(t,n){var r;return r=e.call(this)||this,Object.assign(_assertThisInitialized(r),t),r.type=n,r.brandDirectionsSlider=null,r.catalogState={brandId:r.brandInfo.id,catalogType:n},r.brandLikesInfo=new BrandLikeHelper(r.brandInfo),r.brandDirections=new BrandDirectionsHelper(r.brandDirections),r}_inheritsLoose(t,e);var n=t.prototype;return n.onBeforeRender=function(){document.getElementById("mainContainer").classList.add(CONTAINER_SPECIAL_CLASS)},n.onAfterRender=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$router.replaceState({catalogState:this.catalogState},document.title,window.location.href),this.brandLikesInfo.getFavoriteBrandInfo(),e.next=4,this.$moduleLoader.loadModuleAsync("lazyImageLoader");case 4:t=e.sent,this.imageLoader=new t(document.documentElement),this._setPreviewModeLinks(),this.bannersBlocksObserver=this.$stat.banners.bannerBlockShownStatWba(this),this.$stat.banners.initClickEvent(!0);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.onBeforeUnrender=function(){var e;null===(e=this.bannersBlocksObserver)||void 0===e||e.destroy(),document.getElementById("mainContainer").classList.remove(CONTAINER_SPECIAL_CLASS)},n.isDenyLink=function(e){var t;return(null===(t=this.menuDenyLinks)||void 0===t?void 0:t.indexOf(e))>-1},n.getBannerContainerClass=function(e){var t="banner";switch(e){case 1:return t+"-1920";case 2:return t+"-1360";case 3:return t+"-1105";default:return t}},n.buildHTMLContent=function(e){var t=this;if(!Array.isArray(e.infoBlockItems)||0==e.infoBlockItems.length)return"";var n=document.createDocumentFragment(),r=document.createElement("body");return n.appendChild(r),e.infoBlockItems.reduce(function(e,n){return n.htmlPageContent.forEach(function(n){return t._buildHtmlElement(n,e)}),e},r),n.firstElementChild.innerHTML},n.updateFullModel=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.brandInfo.id!=this.brandInfo.id&&(this.brandLikesInfo.update(t.brandInfo),$.observable(this.catalogMenu).refresh(t.catalogMenu),$.observable(this.sitePathItems).refresh(t.sitePathItems),$.observable(this.brandInfo).setAllProperty(t.brandInfo),this.brandDirections.update(t.brandDirections)),this._refreshBrandScheme(t),e.next=4,this.$helper.nextTick();case 4:this.imageLoader.update(document.getElementById("app").querySelectorAll("[data-original], [data-html-original]").toArray()),this._setPreviewModeLinks(),null===(n=this.bannersBlocksObserver)||void 0===n||n.destroy(),this.bannersBlocksObserver=this.$stat.banners.bannerBlockShownStatWba(this);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.showInfoPagePopup=function(e){var t=this;if(this.$isDesktop)return!0;e.preventDefault();var n=new URL(e.currentTarget.href.replace("/brands/","/brands/data/"));return this.$httpClient.fetchJSON(n.pathname).then(function(n){var r=t._extractInfoPageContent(n.data.model.brandScheme.sections),o=t.buildHTMLContent(r.data);wb.popup.showCustomPopup({useHtml:!0,msg:'<div class="popup__header">'.concat(e.target.textContent,'</div><div class="content-about-brand">').concat(o,"</div>"),popupClassesList:["i-popup-about-brand","shown","popup"],contentClasses:["popup__content"],lockScroll:!0})}).catch(function(e){console.error(e),wb.popup.renderModalError("Error loading info page")}),!1},n._setPreviewModeLinks=function(){if(!(location.pathname.indexOf("/preview/")<0)){var e=document.querySelectorAll(".j-moderate-link a");0!=(null==e?void 0:e.length)&&e.forEach(function(e){var t=new URL(e.href);e.href="".concat(t.origin,"/preview").concat(t.pathname)})}},n._refreshBrandScheme=function(e){$.observable(this).setProperty({brandScheme:e.brandScheme})},n._extractInfoPageContent=function(e){for(var t=0;t<e.length;t++)for(var n=1;n<=e[t].columnCount;n++)for(var r=0;r<e[t].blocks[n].length;r++)if(9==e[t].blocks[n][r].type)return e[t].blocks[n][r]},n._buildHtmlElement=function(e,t){var n,r,o=this;if("text"!=e.type){var a,i=document.createElement(e.tagName);if((null===(n=e.attributes)||void 0===n?void 0:n.length)>0&&e.attributes.forEach(function(e){var t=e.key,n=e.value;i.setAttribute(t,n)}),(null===(r=e.children)||void 0===r?void 0:r.length)>0)null===(a=e.children)||void 0===a||a.forEach(function(e){return o._buildHtmlElement(e,i)});t.appendChild(i)}else t.innerHTML+=e.content},t}(WbSpaModel);module.exports=BrandConstructorViewModel;

},{"../../modules/catalog/brandDirectionHelper":10,"../../modules/catalog/brandLikeHelper":11}],4:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,r,t,n,o,a,i){try{var d=e[a](i),s=d.value}catch(e){return void t(e)}d.done?r(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function i(e){asyncGeneratorStep(a,n,o,i,d,"next",e)}function d(e){asyncGeneratorStep(a,n,o,i,d,"throw",e)}i(void 0)})}}function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,_setPrototypeOf(e,r)}function _setPrototypeOf(e,r){return(_setPrototypeOf=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var GoodsCatalogModel=require("./goodsCatalog"),CardSizeModel=require("../../modules/catalog/cardSizeModel"),BrandLikeHelper=require("../../modules/catalog/brandLikeHelper"),BrandDirectionsHelper=require("../../modules/catalog/brandDirectionHelper"),BrandsConstructorCatalogViewModel=function(e){function r(r,t,n,o){var a;return(a=e.call(this,r,t,n,o)||this).sizerModel=new CardSizeModel(null,window.location.href),a.brandLikesInfo=new BrandLikeHelper(a.brandInfo),a.brandDirections=new BrandDirectionsHelper(r.brandDirections),a.isCatalog=!0,a}_inheritsLoose(r,e);var t=r.prototype;return t.onAfterRender=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.prototype.onAfterRender.call(this);case 2:this.brandLikesInfo.getFavoriteBrandInfo();case 3:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}(),t.onBeforeUnrender=function(){e.prototype.onBeforeUnrender.call(this)},t.updateFullModel=function(r){this.brandInfo.id!=r.brandInfo.id&&this.brandLikesInfo.update(r.brandInfo),this.brandDirections.update(r.brandDirections,this.brandInfo.id==r.brandInfo.id),e.prototype.updateFullModel.call(this,r)},t._canUpdateAdvGoods=function(){return!1},r}(GoodsCatalogModel);module.exports=BrandsConstructorCatalogViewModel;

},{"../../modules/catalog/brandDirectionHelper":10,"../../modules/catalog/brandLikeHelper":11,"../../modules/catalog/cardSizeModel":12,"./goodsCatalog":6}],5:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,n,o,i,s,"throw",e)}i(void 0)})}}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GoodsCatalogModel=require("./goodsCatalog"),BrandLikeHelper=require("../../modules/catalog/brandLikeHelper"),BrandsCatalogViewModel=function(e){function t(t,r,n,o){var a;return(a=e.call(this,t,r,n,o)||this).brandLikesInfo=new BrandLikeHelper(t.brandInfo),a}_inheritsLoose(t,e);var r=t.prototype;return r.onBeforeUnrender=function(){e.prototype.onBeforeUnrender.call(this)},r.onAfterRender=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.brandLikesInfo.getFavoriteBrandInfo(),t.next=3,e.prototype.onAfterRender.call(this);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),r.updateFullModel=function(t){$.observable(this.brandInfo).setProperty(t.brandInfo),this.brandLikesInfo.update(t.brandInfo),e.prototype.updateFullModel.call(this,t)},r._canUpdateAdvGoods=function(){return!1},t}(GoodsCatalogModel);module.exports=BrandsCatalogViewModel;

},{"../../modules/catalog/brandLikeHelper":11,"./goodsCatalog":6}],6:[function(require,module,exports){
"use strict";var _excluded=["sort","cardsize","page"],_excluded2=["sort","cardSize","page"];function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function asyncGeneratorStep(e,t,a,r,o,n,i){try{var s=e[n](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(r,o){var n=e.apply(t,a);function i(e){asyncGeneratorStep(n,r,o,i,s,"next",e)}function s(e){asyncGeneratorStep(n,r,o,i,s,"throw",e)}i(void 0)})}}function _objectWithoutProperties(e,t){if(null==e)return{};var a,r,o=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PagerHelper=require("../../modules/catalog/catalogPagerHelper"),QueryHelper=require("../../modules/catalog/queryHelper"),BaseGoodsCatalogViewModel=require("./baseGoodsCatalog"),_require=require("../../modules/catalog/xCatalogData"),XCatalogData=_require.XCatalogData,GoodsCatalogViewModel=function(e){function t(t,a,r,o){var n;n=e.call(this)||this,Object.assign(_assertThisInitialized(n),t),n.initialData=o,n.routeName=r,n.xData=new XCatalogData(n.xData.xcatalogQuery,n.xData.xcatalogShard,n.xData.legacyMode),n.xpath=n._getXPath(),n.showTags=!0,n.catalogEmpty=0===n.products.length,n.baseCatalogState={catalogType:a,sessionId:n.sessionId};var i=n._getInitialParams(),s=i.sort,l=void 0===s?n.sorterModel.value:s,c=i.cardsize,d=i.page,u=_objectWithoutProperties(i,_excluded),h=new QueryHelper({sort:l,cardsize:c,page:d,filters:u},n.baseCatalogState);return n.initialFilters=u,n.queryHelper=h,n.pagerHelper=new PagerHelper(n.pagerModel,window.location.pathname,h),n}_inheritsLoose(t,e);var a=t.prototype;return a.onAfterRender=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,r,o,n,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.onAfterRender.call(this),r=_objectSpread(_objectSpread({},this.baseCatalogState),this.queryHelper.toState()),this.$router.replaceState({catalogState:r},document.title,window.location.href),o=this._initFilters(this.initialData.filters),this.catalogContentContainer=document.getElementById("catalog-content"),this.topContentConatainer=document.getElementById("catalog"),t.next=8,this.$moduleLoader.loadModuleAsync("catalogProductCardManager");case 8:return n=t.sent,this.catalogProductCardManager=new n({container:this.catalogContentContainer,products:this.products,imgSize:null===(a=this.sizerModel)||void 0===a?void 0:a.value,targetUrl:this.targetUrl}),i=this.catalogProductCardManager.renderCards(),this._initAdvGoods(),t.next=14,this.$moduleLoader.loadModuleAsync("lazyImageLoader");case 14:return s=t.sent,this.imageLoader=new s(this.catalogContentContainer,{allowNativeLazyLoading:!0}),this._sendStatistic(),t.next=19,Promise.all([o,i]);case 19:this.$moveToAnchor(window.location.hash.slice(1),!1),this.quickNavDestroyer=quickNav({bottomPx:document.documentElement.clientHeight}),this.$catalogCache.saveCatalogCache(this.routeName,this.cacheKey,this.cacheModel);case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),a.onBeforeUnrender=function(){var t,a;e.prototype.onBeforeUnrender.call(this),null===(t=this.imageLoader)||void 0===t||t.destroy(),null===(a=this.quickNavDestroyer)||void 0===a||a.call(this)},a.updateFullModel=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var a,r,o,n,i,s,l,c,d,u,h,p=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.xData=t.xData,this.baseCatalogState.category=this.$router.routeParameters.category,this.sessionId=this._generateId(),this.menuId=t.menuId,this.advGoods=null!==(a=t.advGoods)&&void 0!==a?a:[],this.originalUrl=window.location.pathname,this.searchTags=t.searchTags,this.tagsUrl=t.tagsUrl,this.selectedHasChild=t.selectedHasChild,$.observable(this.sitePathItems).refresh(t.sitePathItems),$.observable(null!==(r=this.catalogMenu)&&void 0!==r?r:[]).refresh(null!==(o=t.catalogMenu)&&void 0!==o?o:[]),$.observable(this.sorterModel).setAllProperty(t.sorterModel),$.observable(null!==(n=this.sizerModel)&&void 0!==n?n:{}).setAllProperty(null!==(i=t.sizerModel)&&void 0!==i?i:{}),$.observable(this).setProperty({title:t.title,showTags:!1,catalogEmpty:0===t.products.length,emptyCatalogLink:t.emptyCatalogLink}),this.baseCatalogState.sessionId=this.sessionId,this.xpath=this._getXPath(),s=this._getInitialParams(),l=s.sort,c=s.cardSize,d=s.page,u=_objectWithoutProperties(s,_excluded2),this.queryHelper.updateModel({sort:l,cardSize:c,page:d,filters:u},this.baseCatalogState),this.pagerHelper.updateModel(t.pagerModel,window.location.pathname),h=_objectSpread(_objectSpread({},this.baseCatalogState),this.queryHelper.toState()),this.$router.replaceState({catalogState:h},document.title,window.location.href),this.xData=new XCatalogData(this.xData.xcatalogQuery,this.xData.xcatalogShard,this.xData.legacyMode),this.filterHelper.updateModelAsync(this.xData,u,this.selectedHasChild),this._rerenderCatalog(t.products).then(function(){var e;null===(e=p.advGoodsHelper)||void 0===e||e.updateModel(p.advGoods,{menuId:p.menuId,usexcatalog:!0})}),$.observable(this).setProperty({showTags:!0}),this.$seoHelper.render(t.metaTags),this.$catalogCache.saveCatalogCache(this.routeName,this.cacheKey,this.cacheModel);case 29:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a._initAdvGoods=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$moduleLoader.loadModuleAsync("advGoods");case 2:t=e.sent,this.advGoodsHelper=new t(this.advGoods,{menuId:this.menuId,usexcatalog:!0},this.catalogContentContainer,this.queryHelper),this._canUpdateAdvGoods()&&this.advGoodsHelper.setAdvInfoOnCards();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_createClass(t,[{key:"cacheModel",get:function(){var e;return _objectSpread(_objectSpread({},this.initialData),{},{type:null===(e=this.baseCatalogState)||void 0===e?void 0:e.catalogType,isCache:!0,filters:{filtersDictionary:this.filterHelper.filtersDictionary,lastData:this.filterHelper.lastLoadedData}})}},{key:"cacheKey",get:function(){return window.location.href}}]),t}(BaseGoodsCatalogViewModel);module.exports=GoodsCatalogViewModel;

},{"../../modules/catalog/catalogPagerHelper":13,"../../modules/catalog/queryHelper":14,"../../modules/catalog/xCatalogData":16,"./baseGoodsCatalog":2}],7:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,s)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function o(e){asyncGeneratorStep(a,r,s,o,i,"next",e)}function i(e){asyncGeneratorStep(a,r,s,o,i,"throw",e)}o(void 0)})}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var MainCatalogModel=function(e){function t(t){var n;return n=e.call(this)||this,Object.assign(_assertThisInitialized(n),t),n.carouselsReady=!1,n.carousels=[],n.toggleSideMenu=n.toggleSideMenu.bind(_assertThisInitialized(n)),n.topBrandsClick=n.topBrandsClick.bind(_assertThisInitialized(n)),n.version=t.version,n.bigBannersCallbacks={onInit:n.onInitBigBanners.bind(_assertThisInitialized(n)),onClick:n.onClickBigBanners.bind(_assertThisInitialized(n))},n}_inheritsLoose(t,e);var n=t.prototype;return n.onAfterRender=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={mainVersion:this.version,category:this.$router.routeParameters.category,catalogType:this.catalogType},this.$router.replaceState({catalogState:t},document.title,window.location.href),this.$adult.proceedIfAdultConfirmed(this.needAdultProtection),this.seasonBanners.length>0&&this._initBannersCarousel(),e.next=6,this.$moduleLoader.loadModuleAsync("lazyImageLoader");case 6:n=e.sent,this.imageLoader=new n(document.documentElement),this._initCarousels(),this.$analitic.updateAnaliticsFromQuery(),this.$stat.banners.initClickEvent(),this.$stat.banners.sendStatisticNow(),this._sendShownPageStat(),this._sendTopBrandsShownStat(),this.bannersBlocksObserver=this.$stat.banners.bannerBlockShownStatWba(this);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.onBeforeUnrender=function(){var e,t,n;null===(e=this.showTopBrandsObserver)||void 0===e||e.destroy(),this.$stat.banners.destroyClickEvent(),null===(t=this.imageLoader)||void 0===t||t.destroy(),null===(n=this.bannersBlocksObserver)||void 0===n||n.destroy()},n.isDenyLink=function(e){var t;return(null===(t=this.menuDenyLinks)||void 0===t?void 0:t.indexOf(e))>-1},n.toggleSideMenu=function(e,t){var n,r=$.view(t.currentTarget).data;!(e&&this.isDenyLink(r.entity.id)||!this.$isDesktop)||!this.$isDesktop&&(null===(n=r.childNodes)||void 0===n?void 0:n.length)<1||(t.preventDefault(),this.$isDesktop?$.observable(r).setProperty({renderSubMenu:!0}):wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["popup-menu","j-popup-menu","shown"],contentClasses:["popup__content"],useCenteredFunction:!0,modal:!0,closeClass:["j-close","popup__close"],closeSelector:".j-close",onShow:function(e){$.views.loadTemplateAsync("mainCatalogMenuMobileTmpl").then(function(t){var n=t.render(r);e.querySelector(".popup__content").innerHTML=n})}}))},n.toggleInnerMenu=function(e,t){if("m"!=wb.settings.displayMode){var n=$.view(t.target).data;if($.observable(n).setProperty({showInnerMenu:e,floatLeft:!1}),e){var r=t.target.parentNode.querySelector(".j-drop-menu").getBoundingClientRect();document.documentElement.clientWidth<r.right&&$.observable(n).setProperty({floatLeft:!0})}}},n.updateFullModel=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$.observable(this).setProperty({pageTitle:t.pageTitle,smallBanners:t.smallBanners,carouselLink:t.carouselLink,needAdultProtection:t.needAdultProtection,carouselsReady:!1}),$.observable(this.catalogMenu).refresh(t.catalogMenu),$.observable(this.sitePathItems).refresh(t.sitePathItems),$.observable(this.firstBannersMob).refresh(null!==(n=t.firstBannersMob)&&void 0!==n?n:[]),$.observable(this.firstBannersDesk).refresh(null!==(r=t.firstBannersDesk)&&void 0!==r?r:[]),this.$adult.proceedIfAdultConfirmed(this.needAdultProtection),this._initCarousels(),this._updateLazyLoader(),this.$seoHelper.render(t.metaTags),this._sendTopBrandsShownStat(),null===(s=this.bannersBlocksObserver)||void 0===s||s.destroy(),this.bannersBlocksObserver=this.$stat.banners.bannerBlockShownStatWba(this);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onInitBigBanners=function(){this._sendBigBannersShownStat()},n.onClickBigBanners=function(e){this._sendBigBannersClickStat(e)},n.topBrandsClick=function(e){var t=e.currentTarget,n=t.dataset,r=n.seeAll,s=n.cardIndex;if(r)this._sendCarouselWbaEvent("Carousel_All",0,0);else{var a=$.view(t).data,o=parseInt(s)+1;this._sendCarouselWbaEvent("Carousel_T",o,a.name)}},n._sendTopBrandsShownStat=function(){var e;null===(e=this.showTopBrandsObserver)||void 0===e||e.destroy();var t=this,n=document.querySelector(".j-top-brands");n&&(this.showTopBrandsObserver=this.$observerHelper.getVerticalObserver(n),n.addEventListener(this.showTopBrandsObserver.elementInViewportEventName,function(){t._sendCarouselWbaEvent("Carousel_S",0,0)}),this.showTopBrandsObserver.observe())},n._sendCarouselWbaEvent=function(e,t,n){this.$analitic.sendCarouselWbaEvent(e,"Catalog_Carousel_Brands",t,0,n)},n._sendWbaStat=function(e,t){var n;t=null!==(n=t)&&void 0!==n?n:{},this.$analitic.sendEvent(e,t)},n._sendShownPageStat=function(){128603==this.menuId&&this._sendWbaStat("Landing_Magnit_V")},n._sendBigBannersShownStat=function(){if(128603==this.menuId){var e=document.querySelector(".banner__content");if(!e)return;e.dataset.bannersShownStatSended||(e.dataset.bannersShownStatSended=!0,this._sendWbaStat("Landing_Magnit_Banner_Big_Slider_S"))}},n._sendBigBannersClickStat=function(e){if(128603==this.menuId){var t=e.target.closest(".j-banner");if(t){var n={link:t.href,name:t.title};this._sendWbaStat("Landing_Magnit_Banner_Big_Slider_T",n)}}},n._sendCarouselCategoryScrollStat=function(){128603==this.menuId&&this._sendWbaStat("Landing_Magnit_Carousel_Category_Scroll")},n._sendCarouselCategoryClickStat=function(e){if(128603==this.menuId){var t={name:e.title};this._sendWbaStat("Landing_Magnit_Carousel_Category_T",t)}},n._updateLazyLoader=function(e){var t;null===(t=this.imageLoader)||void 0===t||t.update(document.querySelectorAll("img[data-original]").toArray(),e)},n._initBannersCarousel=function(){var e=this,t=document.querySelector(".j-swiper-season-banners");new Swiper(t.querySelector(".swiper-container"),{slidesPerView:"auto",spaceBetween:8,navigation:{nextEl:t.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev"),disabledClass:"hide"},breakpoints:{1024:{spaceBetween:110},576:{spaceBetween:24}},on:{click:function(t){var n=t.target.closest(".j-banner");null!=n&&(e.$analitic.saveState({l:"CCT"}),e._sendCarouselCategoryClickStat(n))},slideChange:function(){e._sendCarouselCategoryScrollStat()}}})},n._initCarousels=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$httpClient.fetchJSON(this.carouselLink);case 2:n=e.sent,r=n.carousels,s=n.goods,null==r&&null!=s&&(r=[{goods:s}]),null===(t=r)||void 0===t||t.forEach(function(e){return null!=e&&(e.goods=e.goods.map(function(e){return e.cod1S}))}),$.observable(this).setProperty({carousels:r,carouselsReady:!0});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(WbSpaModel);module.exports=MainCatalogModel;

},{}],8:[function(require,module,exports){
"use strict";var _excluded=["xfilters","xparams","xshard","xsearch","brand","bid","fromsearchinput","page","sort","cardsize","search","targeturl","nocorrection"],_excluded2=["xfilters","xparams","xshard","page","sort","cardsize","search","xsearch","targeturl","nocorrection"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,s=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(s.push(a.value),!t||s.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,a,n,s,i){try{var o=e[s](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(a,n)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var s=e.apply(t,r);function i(e){asyncGeneratorStep(s,a,n,i,o,"next",e)}function o(e){asyncGeneratorStep(s,a,n,i,o,"throw",e)}i(void 0)})}}function _objectWithoutProperties(e,t){if(null==e)return{};var r,a,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BaseGoodsCatalogViewModel=require("./baseGoodsCatalog"),PagerHelper=require("../../modules/catalog/catalogPagerHelper"),QueryHelper=require("../../modules/catalog/queryHelper"),CardSizeModel=require("../../modules/catalog/cardSizeModel"),SorterModel=require("../../modules/catalog/sorterModel"),_require=require("../../modules/catalog/xCatalogData"),XSeachData=_require.XSeachData,SearchCatalogViewModel=function(e){function t(t,r){var a;(a=e.call(this)||this).routeName=r,a.useOldSearch=!1,a.initialParams=a._getInitialParams();var n=a.initialParams,s=(n.xfilters,n.xparams,n.xshard,n.xsearch,n.brand,n.bid,n.fromsearchinput,n.page,n.sort),i=n.cardsize,o=n.search,c=n.targeturl,u=(n.nocorrection,_objectWithoutProperties(n,_excluded));return a.xData=new XSeachData(o,o),a.targetUrl=c,a.initialFilters=u,a.sizerModel=new CardSizeModel(i,window.location.href),a.sorterModel=new SorterModel(s,window.location.href),a.baseCatalogState={catalogType:t,search:o,sessionId:a._generateId()},a.baseXdataUrl="ru"===wb.settings.currentLocale?"https://wbxsearch.wildberries.ru/exactmatch/v2/":"https://wbxsearch-".concat(wb.settings.currentLocale,".wildberries.ru/exactmatch/"),a.emptySearchRenderer=null,a.yourChoice=[],a.emptySearch=!1,a.inited=!1,a.recommendationsFound=!1,a.hasInjection=!0,a.modifiedSearch=!1,a.queryHelper=new QueryHelper({page:a.initialParams.page,sort:a.initialParams.sort,cardSize:a.initialParams.cardsize,search:a.initialParams.search,filters:a.initialFilters,nocorrection:a.initialParams.nocorrection,targetUrl:a.targetUrl},a.baseCatalogState),a._getAnaliticsData(),a.pagerHelper=null,a}_inheritsLoose(t,e);var r=t.prototype;return r.onBeforeRender=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.xData.search&&""!==this.xData.search){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._checkPossibleRedirects();case 4:if(t=e.sent,r=t.isRedirected,a=t.redirect,!r){e.next=9;break}return e.abrupt("return",this.$router.moveTo(a,!0));case 9:if(this.xData.isValid){e.next=13;break}return e.next=12,this._getXdataAsync();case 12:this.xData=e.sent;case 13:this._updateXData(this.xData),null!=(n=this.$catalogCache.getCatalogModelFromCache(this.$router.targetRoute,this.queryHelper.getQueryParams()))&&(this.products=n.products,this.injection=n.injection,this.cacheFilters=n.filters,this.pagerModel=n.pagerHelper,this.sorterModel=n.sorterModel,this.targetUrl=n.targetUrl,this.fromCache=!0);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.onAfterRender=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.prototype.onAfterRender.call(this),null!=this.xData.search&&""!==this.xData.search){t.next=5;break}return t.next=4,this.$router.moveTo404Async();case 4:return t.abrupt("return",t.sent);case 5:return this.catalogContentContainer=document.getElementById("catalog-content"),this.topContentConatainer=document.getElementById("catalog"),t.next=9,this._initModules();case 9:return t.next=11,this.buildInitialModelAsync(this.xData);case 11:window.location.hash&&this.$moveToAnchor(window.location.hash.slice(1),!1),this._sendStatistic(),this._getTagsAsync(),this.emptySearch&&this._getEmptySearchRecommendations(),this.quickNavDestroyer=quickNav({bottomPx:document.documentElement.clientHeight});case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),r.onBeforeUnrender=function(){var t;e.prototype.onBeforeUnrender.call(this),null===(t=this.quickNavDestroyer)||void 0===t||t.call(this)},r.updateFullModel=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a,n,s,i,o,c,u,l,h,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fromCache=!1,$.observable(this).setProperty({showTags:!1,modifiedSearch:!1,emptySearch:!1}),$.observable(this.yourChoice).refresh([]),this.initialParams=this._getInitialParams(),t=this.initialParams,t.xfilters,r=t.xparams,a=t.xshard,t.page,n=t.sort,s=void 0===n?this.sorterModel.value:n,t.cardsize,i=t.search,t.xsearch,o=t.targeturl,t.nocorrection,c=_objectWithoutProperties(t,_excluded2),this.initialParams.sort=s,null!=(u=new XSeachData(i,i,r,a)).search&&""!==u.search){e.next=11;break}return e.next=10,this.$router.moveTo404Async();case 10:return e.abrupt("return",e.sent);case 11:if(this.targetUrl=o,this.catalogProductCardManager.targetUrl=o,this.initialFilters=c,this.advGoods=[],this.xpath=this._getXPath(),this.baseCatalogState.sessionId=this._generateId(),this.baseCatalogState.search=i,this._getAnaliticsData(),u.isValid){e.next=30;break}return e.next=22,this._checkPossibleRedirects();case 22:if(l=e.sent,h=l.isRedirected,d=l.redirect,!h){e.next=27;break}return e.abrupt("return",this.$router.moveTo(d,!0));case 27:return e.next=29,this._getXdataAsync();case 29:u=e.sent;case 30:return e.next=32,this.buildInitialModelAsync(u);case 32:this._updateAnalitics(),this._getTagsAsync(this.emptySearch),this._sendStatistic(),this.emptySearch&&this._getEmptySearchRecommendations();case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r.getRawSearchUrl=function(e){return"".concat(wb.urlHelper.xSearchBase,"?search=").concat(e,"&nocorrection=1")},r._getSuggestionsUrlsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL(t,window.location.origin),e.prev=1,e.next=4,this.$getUserGender();case 4:a=e.sent,e.t0=a,e.next=0===e.t0?8:1===e.t0?10:12;break;case 8:return r.pathname+="male",e.abrupt("break",14);case 10:return r.pathname+="female",e.abrupt("break",14);case 12:return r.pathname+="common",e.abrupt("break",14);case 14:return e.abrupt("return",r);case 17:return e.prev=17,e.t1=e.catch(1),console.error(e.t1.message),r.pathname+="common",e.abrupt("return",r);case 22:case"end":return e.stop()}},e,this,[[1,17]])}));return function(t){return e.apply(this,arguments)}}(),r._getXdataAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getSuggestionsUrlsAsync(this.baseXdataUrl);case 2:return(t=e.sent).searchParams.append("query",this.initialParams.search),e.prev=4,e.next=7,fetch(t.toString()).then(function(e){return e.json()});case 7:return r=e.sent,(a=new XSeachData(null==r?void 0:r.name,this.xData.search,null==r?void 0:r.query,null==r?void 0:r.shardKey)).isValid||(a.search=this.initialParams.search),e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(4),console.error(e.t0.message),e.abrupt("return",new XSeachData(this.initialParams.search,this.initialParams.search));case 17:case"end":return e.stop()}},e,this,[[4,13]])}));return function(){return e.apply(this,arguments)}}(),r._checkPossibleRedirects=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$httpClient.fetchJSON("search/checkredirect?search=".concat(encodeURIComponent(this.initialParams.search)));case 3:return t=e.sent,r=null!=t,e.abrupt("return",{isRedirected:r,redirect:t});case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error checking redirect ".concat(e.t0.message)),e.abrupt("return",{isRedirect:!1,redirect:null});case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),r._getTagsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URL("/search/tags",window.location.origin)).searchParams.append("searchQuery",this.xData.search),t.searchParams.append("isEmpty",this.emptySearch),e.next=5,this.$httpClient.fetchJSON(t.toString());case 5:r=e.sent,a=r.topTags,n=r.bottomTags,$.observable(this).setProperty({topTags:a,bottomTags:n,showTags:!0});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._loadXgoodsAsync=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.xData.isValid){t.next=6;break}return t.next=3,e.prototype._loadXgoodsAsync.call(this);case 3:return a=t.sent,(null===(r=a.productsAdapted)||void 0===r?void 0:r.length)>0&&!this.targetUrl&&(this.targetUrl="XS"),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),r._renderInjections=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.injectionRenderer.products=this.injection,e.next=3,this.injectionRenderer.renderCards();case 3:this._updateLazyLoader();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._canUpdateAdvGoods=function(){var e,t,r;return 1==(null!==(e=null!==(t=null===(r=this.pagerHelper)||void 0===r?void 0:r.pagerModel.pagingInfo.currentPage)&&void 0!==t?t:this.initialParams.page)&&void 0!==e?e:1)&&"popular"===this.sorterModel.value},r._getEmptySearchRecommendations=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URL("/recommendations/search-recommendations",window.location.origin)).searchParams.append("searchPhrase",this.xData.search),e.prev=2,e.next=5,this.$httpClient.fetchJSON(t.toString());case 5:r=e.sent,Array.isArray(null==r?void 0:r.nmIds)&&r.nmIds.length>0&&wb.xnm.getCatalogCards(r.nmIds).then(function(e){var t=Object.values(e).reduce(function(e,t){return t.id&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),e},[]);return $.observable(a).setProperty({recommendationsFound:t.length>0}),a.emptySearchRenderer.products=t,a._showEmptyResultsWba(),a.emptySearchRenderer.renderCards()}).then(function(){a._updateLazyLoader(),a._bindClickEmptyResultsWba()}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0.message);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}(),r._showEmptyResultsWba=function(){this._sendCarouselWbaEvent("Carousel_S",0,0)},r._bindClickEmptyResultsWba=function(){document.getElementById("emptySearchRecommendations").addEventListener("click",this._clickEmptyResultsWba.bind(this))},r._clickEmptyResultsWba=function(e){var t=e.target.closest(".j-card-item").dataset,r=t.cardIndex,a=t.popupNmId;this._sendCarouselWbaEvent("Carousel_T",parseInt(r)+1,a)},r._sendCarouselWbaEvent=function(e,t,r){this.$analitic.sendCarouselWbaEvent(e,"Search_Carousel_Maybe_You_Like",t,r,0)},r._sendStatistic=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var r,a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype._sendStatistic.call(this),(n=[]).push(this.$stat.wrapParam("Q",this.xData.search)),n.push(this.$stat.wrapParam("UQ",this.xData.userSearch)),n.push(this.$stat.wrapParam("SRC",this.pagerHelper.pagerModel.pagingInfo.totalItems||0)),n.push(this.$stat.wrapParam("SQC",0)),n.push(this.$stat.wrapParam("SET",1)),n.push(this.$stat.wrapParam("SUT","ST"===this.initialParams.targeturl?1:0)),n.push(this.$stat.wrapParam("NMS",null!==(r=null===(a=this.products)||void 0===a?void 0:a.map(function(e){return e.cod1S}))&&void 0!==r?r:[])),this.$stat.sendEvent("SRE",n);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),r._updateAnalitics=function(){if(this.xData.isValid)switch(wb.analitics.getState().l){case"STH":wb.analitics.saveState({l:"SNS"});break;case"STA":wb.analitics.saveState({l:"SNT"})}},r._initModules=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,a,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.$moduleLoader.loadModuleAsync("catalogProductCardManager"),this.$moduleLoader.loadModuleAsync("advGoods"),this.$moduleLoader.loadModuleAsync("lazyImageLoader")]);case 2:t=e.sent,r=_slicedToArray(t,3),a=r[0],n=r[1],s=r[2],null!=n&&(this.advGoodsHelper=new n(this.advGoods,{searchtext:this.xData.search,usexcatalog:!0},this.catalogContentContainer,this.queryHelper)),this.catalogProductCardManager=new a({container:this.catalogContentContainer,products:[],imgSize:this.sizerModel.value,targetUrl:this.targetUrl}),this.emptySearchRenderer=new a({container:document.getElementById("emptySearchRecommendations"),products:[],targetUrl:"IM"}),this.injectionRenderer=new a({container:document.getElementById("injectionsContainer"),products:[],targetUrl:this.targetUrl}),this.imageLoader=new s(this.catalogContentContainer,{allowNativeLazyLoading:!0});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r._loadSearchGoods=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._loadCatalogGoodsAsync();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),this.products=[],this.injection=[],e.abrupt("return",{products:[],advGoodsAdded:!1,injection:[],total:0});case 11:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),r._updateXData=function(e){$.observable(this.xData).setAllProperty(e),this.queryHelper.updateModel({page:this.initialParams.page,sort:this.initialParams.sort,cardSize:this.initialParams.cardsize,search:this.initialParams.search,filters:this.initialFilters,nocorrection:this.initialParams.nocorrection,targetUrl:this.targetUrl},this.baseCatalogState)},r.buildInitialModelAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var r,a,n,s,i,o,c,u,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.catalogProductCardManager.targetUrl&&"EX"!==this.catalogProductCardManager.targetUrl||(this.catalogProductCardManager.targetUrl=this.targetUrl),this._updateXData(t),this.advGoodsHelper.updateModel([],{searchtext:this.xData.search,usexcatalog:!0}),!this.fromCache){e.next=7;break}e.t0={products:this.products,injection:this.injection},e.next=10;break;case 7:return e.next=9,this._loadSearchGoods();case 9:e.t0=e.sent;case 10:return s=e.t0,this.fromCache||!this.xData.isValid||Array.isArray(s.products)&&s.products.length>0||wb.analitics.sendEvent("Search_Empty_Respon",{type:this.lastSearchType,text:this.xData.userSearch,group:"new",typed_text:this.lastTypedText,text_suggest:this.lastSuggestions}),this._updateAnalitics(),this.products=s.products,this.injection=null!==(r=null==s?void 0:s.injection)&&void 0!==r?r:[],this.catalogProductCardManager.targetUrl||(this.catalogProductCardManager.targetUrl=this.targetUrl),this.catalogProductCardManager.products=this.products,e.next=19,this.catalogProductCardManager.renderCards();case 19:if(e.prev=19,null==this.filterHelper){e.next=26;break}return e.next=23,this.filterHelper.updateModelAsync(this.xData,this.initialFilters,!1);case 23:i=e.sent,e.next=29;break;case 26:return e.next=28,this._initFilters(this.cacheFilters);case 28:i=e.sent;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(19),console.error(e.t1);case 34:c=parseInt(null!==(a=this.initialParams.page)&&void 0!==a?a:1),null===i&&(null===(n=this.products)||void 0===n?void 0:n.length)>0&&(1===c?i=this.products.length>=100?1e3:this.products.length:c>1&&(i=this.products.length>=100?1e3:this.products.length+100*(c-1)),o=!0,this.filterFallback=!0),0===(u=s.total||i)&&wb.analitics.sendEvent("Search_Empty_Respon",{type:this.lastSearchType,text:this.xData.userSearch,group:"old",typed_text:this.lastTypedText,text_suggest:this.lastSuggestions}),$.observable(this).setProperty({hasInjection:this.injection.length>0}),l=PagerHelper.createPagerModel(u,c,window.location.href,o),null==this.pagerHelper?$.observable(this).setProperty({pagerHelper:new PagerHelper(l,window.location.pathname,this.queryHelper,{fallBackMode:o})}):this.pagerHelper.updateModel(l,window.location.pathname),$.observable(this).setProperty({emptySearch:!(u>0),inited:!0}),h=_objectSpread(_objectSpread({},this.baseCatalogState),this.queryHelper.toState()),this.$router.replaceState({catalogState:h},document.title,window.location.pathname+"?".concat(this.queryHelper.getQueryString())+window.location.hash),this.$eventBus.dispatchEvent(new CustomEvent("NeedSearchUpdate",{detail:{searchText:this.xData.search}})),this.$catalogCache.saveCatalogCache(this.routeName,this.cacheKey,this.cacheModel),this._updateLazyLoader(),this._renderInjections(),this._canUpdateAdvGoods()&&this.advGoodsHelper.setAdvInfoOnCards();case 49:case"end":return e.stop()}},e,this,[[19,31]])}));return function(t){return e.apply(this,arguments)}}(),r._getAnaliticsData=function(){var e=_slicedToArray(wb.analitics.getLastSearchAnaliticsData().split("&"),3),t=e[0],r=void 0===t?"Text":t,a=e[1],n=void 0===a?this.xData.rawSearch:a,s=e[2],i=void 0===s?"":s;this.lastSearchType=r,this.lastTypedText=n,this.lastSuggestions=i},_createClass(t,[{key:"cacheModel",get:function(){return{products:this.products,filters:{filtersDictionary:this.filterHelper.filtersDictionary,lastData:this.filterHelper.lastLoadedData},injection:this.injection,pagerModel:this.pagerHelper.pagerModel,sorterModel:this.sorterModel,targetUrl:this.targetUrl}}},{key:"cacheKey",get:function(){return this.queryHelper.getQueryString()}}]),t}(BaseGoodsCatalogViewModel);module.exports=SearchCatalogViewModel;

},{"../../modules/catalog/cardSizeModel":12,"../../modules/catalog/catalogPagerHelper":13,"../../modules/catalog/queryHelper":14,"../../modules/catalog/sorterModel":15,"../../modules/catalog/xCatalogData":16,"./baseGoodsCatalog":2}],9:[function(require,module,exports){
"use strict";function _inheritsLoose(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,_setPrototypeOf(t,o)}function _setPrototypeOf(t,o){return(_setPrototypeOf=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var GoodsCatalogModel=require("./goodsCatalog"),SellerCatalog=function(t){function o(o,e,r,n){return t.call(this,o,e,r,n)||this}return _inheritsLoose(o,t),o.prototype.onAfterRender=function(){t.prototype.onAfterRender.call(this),this.$analitic.sendEvent("Catalog_Supplier_V",{name:this.title,id:this.sellerId})},o}(GoodsCatalogModel);module.exports=SellerCatalog;

},{"./goodsCatalog":6}],10:[function(require,module,exports){
"use strict";var BrandDirectionsHelper=function(){function e(e){Object.assign(this,e)}var t=e.prototype;return t.update=function(e,t){var s,r;t?$.observable(this).setProperty({selectedId:e.selectedId}):($.observable(null!==(s=this.directions)&&void 0!==s?s:[]).refresh(null!==(r=e.directions)&&void 0!==r?r:[]),$.observable(this).setProperty({isOpen:e.isOpen,selectedId:e.selectedId}))},t.toggleDirections=function(){$.observable(this).setProperty({isOpen:!this.isOpen})},e}();module.exports=BrandDirectionsHelper;

},{}],11:[function(require,module,exports){
"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function asyncGeneratorStep(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){asyncGeneratorStep(a,n,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,n,o,i,s,"throw",e)}i(void 0)})}}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BrandLikeHelper=function(e){function t(t){var r;return(r=e.call(this)||this).brandId=t.id,r.name=t.name,r.url=r.$router.getChildRouteByName("SpaFavoritesBrandsVote").path,r.brandLikesUrl=r.$router.getChildRouteByName("SpaFavoritesBrandsGetVotes").path,r.ready=!1,r}_inheritsLoose(t,e);var r=t.prototype;return r.update=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.brandId=t.id,$.observable(this).setProperty({ready:!1,name:t.name}),this.getFavoriteBrandInfo();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r.getFavoriteBrandInfo=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$httpClient.fetchJSON(this.brandLikesUrl,{method:"POST",body:new URLSearchParams({brandId:this.brandId})});case 3:if(null!=(t=e.sent)){e.next=7;break}return console.warn("Didn`t get votes info for brand ".concat(this.brandInfo.name)),e.abrupt("return");case 7:$.observable(this).setProperty(_objectSpread({ready:!0},t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),r.voteForBrand=function(){var e=this;this.alreadyVoted||this.$httpClient.fetchJSON("".concat(this.url),{method:"POST",body:new URLSearchParams({brandId:this.brandId})},{redirectUnauth:!0}).then(function(t){$.observable(e).setProperty({alreadyVoted:!0,votesCount:t.voteCount})}).catch(function(e){e.isUnauthorize})},t}(WbSpaModel);module.exports=BrandLikeHelper;

},{}],12:[function(require,module,exports){
"use strict";var imageSizeDicionary={c516x688:{value:"c516x688",enumValue:3},large:{value:"big",enumValue:1}};Object.freeze(imageSizeDicionary);var CardSizeModel=function(){function e(e,i){var a,r=null==e?null:null===(a=imageSizeDicionary[e])||void 0===a?void 0:a.enumValue;this.defaultCardSize=imageSizeDicionary.c516x688.enumValue,this.currentCardSize=null==r?imageSizeDicionary.c516x688.enumValue:r,this.baseUrl=i,this.value=imageSizeDicionary.c516x688.value,this.cardSizeEntries=this._buildCardSizeEntries()}return e.prototype._buildCardSizeEntries=function(){var e=new URL(this.baseUrl,window.location.origin);return Object.keys(imageSizeDicionary).map(function(i){return e.searchParams.set("cardSize",imageSizeDicionary[i].value),{originalValue:imageSizeDicionary[i].enumValue,value:imageSizeDicionary[i].value,href:e.toString()}})},e}();module.exports=CardSizeModel;

},{}],13:[function(require,module,exports){
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,_setPrototypeOf(e,r)}function _setPrototypeOf(e,r){return(_setPrototypeOf=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var CatalogPagerHelper=function(e){function r(r,a,t){var o,n,s,l,i,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(i=e.call(this)||this).pagerModel=r,i.baseUrl=a,i.queryHelper=t,i.pageSize=null!==(o=p.pageSize)&&void 0!==o?o:100,i.minPagesInRow=null!==(n=p.minPagesInRow)&&void 0!==n?n:7,i.maxPagesInRow=null!==(s=p.maxPagesInRow)&&void 0!==s?s:12,i.fallBackMode=null!==(l=p.fallBackMode)&&void 0!==l&&l,i}_inheritsLoose(r,e);var a=r.prototype;return a.updateModel=function(e,r){this.baseUrl=r,$.observable(this.pagerModel).setAllProperty(e),$.observable(this.pagerModel.pageUrls).refresh(e.pageUrls)},a.updatePage=function(e){var r=this._getPagerData(e);$.observable(this.pagerModel.pagingInfo).setProperty({currentPage:r.page}),$.observable(this.pagerModel.pageUrls).refresh(r.pageUrls)},a.updateTotalItems=function(e){$.observable(this.pagerModel.pagingInfo).setProperty({totalItems:e,totalPages:Math.ceil(e/this.pageSize)}),this.updatePage(this.pagerModel.pagingInfo.currentPage)},a._getPagerData=function(e){var a=this,t=this._getTotalPages(),o=this.pagerModel.pagingInfo.totalItems;this.fallBackMode&&(t=t<=e?e:e+1);var n=[];if(t<this.maxPagesInRow)n.push.apply(n,_toConsumableArray(r.createRange(t,1)));else{var s=~~(this.minPagesInRow/2+(this.minPagesInRow%2==0?3:4)),l=~~(this.minPagesInRow/2+2);if(e<s)n.push.apply(n,_toConsumableArray(r.createRange(this.minPagesInRow,1))),n.push("");else if(e>=o-l-1)n.push(1),n.push(""),n.push.apply(n,_toConsumableArray(r.createRange(this.minPagesInRow,o-this.minPagesInRow+1)));else{n.push(1),n.push("");for(var i=e,p=e,u=!1,g=1;g<this.minPagesInRow;)p<t&&u&&(p++,g++),i>1&&!1===u&&(i--,g++),u=!u;i=1===i?2:i,n.push.apply(n,_toConsumableArray(r.createRange(p-i+1,i))),p<t-1&&n.push("")}}var h=this.queryHelper.getQueryParams("page");return{pageUrls:n.map(function(e){return h.set("page",e),{value:e,href:""!==e?a.baseUrl+"?".concat(h.toString()):null}}),page:e}},a._getTotalPages=function(){return Math.ceil(this.pagerModel.pagingInfo.totalItems/this.pageSize)},r.createPagerModel=function(e,a,t,o){var n=Math.ceil(e/100);o&&(n=n<=a?a:a+1);var s=[];if(n<12)s.push.apply(s,_toConsumableArray(r.createRange(n,1)));else{if(a<7)s.push.apply(s,_toConsumableArray(r.createRange(7,1))),s.push("");else if(a>=n-5-1)s.push(1),s.push(""),s.push.apply(s,_toConsumableArray(r.createRange(7,total-7+1)));else{s.push(1),s.push("");for(var l=a,i=a,p=!1,u=1;u<7;)i<n&&p&&(i++,u++),l>1&&!1===p&&(l--,u++),p=!p;l=1===l?2:l,s.push.apply(s,_toConsumableArray(r.createRange(i-l+1,l))),i<n-1&&s.push("")}}var g=new URL(t,window.location.origin);return{pageUrls:s.map(function(e){return g.searchParams.set("page",e),{value:e,href:""!==e?g.toString():null}}),pagingInfo:{currentPage:a,totalPages:n,totalItems:e,hideTotal:o}}},r.createRange=function(e,r){return Array.from({length:e}).map(function(e,a){return a+r})},r}(WbSpaModel);module.exports=CatalogPagerHelper;

},{}],14:[function(require,module,exports){
"use strict";function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var QueryHelper=function(t){function e(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r=t.call(this)||this).updateModel(e,n),r}_inheritsLoose(e,t);var r=e.prototype;return r.updateModel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.queryDictionary=t,this.baseState=e},r.getQueryString=function(){return this.getQueryParams().toString()},r.getQueryStringForCatalog=function(){var t=this;return Object.keys(this.queryDictionary).reduce(function(e,r){switch(r){case"filters":t.getFiltersQuery(e);break;case"page":case"sort":null!=t.queryDictionary[r]&&e.append(r,t.queryDictionary[r])}return e},new URLSearchParams)},r.getQueryParams=function(t){var e=this;return Object.keys(this.queryDictionary).reduce(function(r,n){return"filters"===n?!t&&e.getFiltersQuery(r):null!=e.queryDictionary[n]&&t!==n&&r.append(n,e.queryDictionary[n]),r},new URLSearchParams)},r.getFiltersQuery=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new URLSearchParams;return null!=this.queryDictionary.filters&&Object.keys(this.queryDictionary.filters).forEach(function(r){e.append(r,t.queryDictionary.filters[r])}),e},r.setKey=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._setKeyInternal(t,e);var n={catalogState:_objectSpread(_objectSpread({},this.baseState),this.toState())};r?this.$router.addState(n,document.title,window.location.pathname+"?".concat(this.getQueryString())):this.$router.replaceState(n,document.title,window.location.pathname+"?".concat(this.getQueryString()))},r.setKeys=function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach(function(t){var r=t.key,n=t.value;return e._setKeyInternal(r,n)}),r&&this.$router.addState({catalogState:_objectSpread(_objectSpread({},this.baseState),this.toState())},document.title,window.location.pathname+"?".concat(this.getQueryString()))},r.toState=function(){return this.queryDictionary},r.checkChanges=function(t){var e=this,r=!1,n=!1,i=!1,o=!1,a=Object.keys(this.queryDictionary.filters),c=Object.keys(t.filters);return this.queryDictionary.cardSize!=t.cardSize&&(r=!0,this.cardSize=t.cardSize),this.queryDictionary.page!=t.page&&(n=!0,this.queryDictionary.page=t.page),this.queryDictionary.sort!=t.sort&&(o=!0,this.queryDictionary.sort=t.sort),a.length==c.length&&a.every(function(r){return e.queryDictionary.filters[r]==t.filters[r]})||(i=!0,this.queryDictionary.filters=t.filters),{needChangeCardSize:r,needUpdatePage:n,needUpdateSort:o,needUpdateFilters:i,needUpdateCatalog:n||o||i}},r._setKeyInternal=function(t,e){this.queryDictionary[t]=e},e}(WbSpaModel);module.exports=QueryHelper;

},{}],15:[function(require,module,exports){
"use strict";var localizer=(new WbSpaModel).$localziation,catalogSortingOrder={popular:{value:"popular",enumValue:1,textValue:localizer.sortPopular},rate:{value:"rate",enumValue:2,textValue:localizer.sortRate},priceup:{value:"priceup",enumValue:3,textValue:localizer.sortPrice+" min"},pricedown:{value:"pricedown",enumValue:13,textValue:localizer.sortPrice+" max"},sale:{value:"sale",enumValue:4,textValue:localizer.sortSale},newly:{value:"newly",enumValue:5,textValue:localizer.sortNewly},price:{value:"price",enumValue:0,textValue:localizer.sortPrice}};Object.freeze(catalogSortingOrder);var CatalogSorterModel=function(){function e(e,r){var t,a=null!==(t=catalogSortingOrder[e])&&void 0!==t?t:catalogSortingOrder.popular;this.value=a.value,this.currentSortingOrder=a.enumValue,this.baseUrl=r,this.sortingEntries=this._buildSortingEntries(),this.textValue=a.textValue}var r=e.prototype;return r.getSortFromEnum=function(e){return Object.values(catalogSortingOrder).find(function(r){return r.enumValue==e})},r._buildSortingEntries=function(){var e=new URL(this.baseUrl,window.location.origin);return Object.keys(catalogSortingOrder).reduce(function(r,t){return e.searchParams.set("sort",catalogSortingOrder[t].value),r[t]={value:catalogSortingOrder[t].value,originalValue:catalogSortingOrder[t].enumValue,href:e.toString(),textValue:catalogSortingOrder[t].textValue},r},{})},e}();module.exports=CatalogSorterModel;

},{}],16:[function(require,module,exports){
"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var XCatalogData=function(){function t(t,e,a){this.xcatalogQuery=t,this.xcatalogShard=e,this.legacyMode=a||!1}return _createClass(t,[{key:"isValid",get:function(){return!(""===this.xcatalogQuery||null==this.xcatalogQuery||""===this.xcatalogShard||null==this.xcatalogShard)}}]),t}(),XSeachData=function(t){function e(e,a,r,o){var n;return(n=t.call(this,r,o)||this).search=e,n.userSearch=a,n}return _inheritsLoose(e,t),_createClass(e,[{key:"isValid",get:function(){return!(""===this.search||null==this.search||""===this.xcatalogShard||null==this.xcatalogShard)}}]),e}(XCatalogData);module.exports={XCatalogData:XCatalogData,XSeachData:XSeachData};

},{}],17:[function(require,module,exports){
"use strict";var XCatalogGoodsLoader=function(){function t(){}return t.loadGoodsAsync=function(o,a,r){var n=t.getXpath(a);return n+="?".concat(o),a.xcatalogQuery&&(n+="&".concat(a.xcatalogQuery)),n+="&".concat(r),fetch(n).then(function(t){return t.json()})},t.getXpath=function(t){return("ru"===wb.settings.currentLocale?"https://wbxcatalog-ru.wildberries.ru/":"https://wbxcatalog-sng.wildberries.ru/")+t.xcatalogShard+"/catalog"},t}();module.exports=XCatalogGoodsLoader;

},{}],18:[function(require,module,exports){
"use strict";var xLegacyCatalogGoodsLoader=function(){function o(){}return o.loadGoodsAsync=function(o,t,a){var c="/oldpromotions/catalog";return c+="?".concat(o),t.xcatalogQuery&&(c+="&".concat(t.xcatalogQuery)),c+="&".concat(a),fetch(c).then(function(o){return o.json()})},o}();module.exports=xLegacyCatalogGoodsLoader;

},{}]},{},[1]);
